<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8"/>
    <title>3D环形</title>
    <meta name="description" content=""/>
    <meta name="viewport" content="width=device-width, target-densitydpi=device-dpi, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <style>
        body, div, ul, li, img, p, a, h1, h2, h3 {
            margin: 0px;
            padding: 0px;
            border: 0px;
        }

        html, body {
            background: #ffffff;
            color: #49494d;
            font-family: "微软雅黑", "黑体", Helvetica, Verdana, sans-serif;
            font-size: 14px;
        }

        body {
            width: 100%;
            height: 100%;
        }

        img{
            display: block;
            margin:0px auto;
        }

    </style>
</head>
<body>
<div id="container"></div>
<script src="three.min.js"></script>
<script type="text/javascript" src="OrbitControls.js"></script>
<script type="text/javascript">
    var renderer, scene, camera, controls;
    var ROTATE = false;
    var WIDTH = 134;
    var HEIGHT = 1165;

    init();
    animate();

    function init(){
        var container = document.getElementById('container');

        renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth,window.innerHeight);
        renderer.setClearColor( 0xf0f0f0 );
        container.appendChild(renderer.domElement);

        camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1000);
        camera.position.z = 1000;
        // camera.rotation.y = Math.PI/20;

        // controls = new THREE.OrbitControls(camera, renderer.domElement);
        // controls.userPan = false;
        // controls.userPanSpeed = 0.0;
        // controls.maxDistance = 5000.0;
        // controls.maxPolarAngle = Math.PI * 0.495;

        // controls.autoRotate = ROTATE;
        // controls.autoRotateSpeed = 4.0;

        scene = new THREE.Scene();

        for(var i = 1; i < 21; i++){
            var texture = THREE.ImageUtils.loadTexture('textures/'+i+'.png');
            texture.minFilter = THREE.LinearFilter;
            var plane = new THREE.PlaneGeometry(WIDTH, HEIGHT, 32);
            var material = new THREE.MeshBasicMaterial({
                map: texture,
                overdraw: true
            });
            material.transparent = true;
            material.opacity = 1;
            material.side = THREE.DoubleSide;
            var mesh = new THREE.Mesh(plane, material);
            var pX = Math.sin(Math.PI*2/20*i)*Math.floor(67/Math.tan(Math.PI/20));
            var pZ = -Math.cos(Math.PI*2/20*i)*Math.floor(67/Math.tan(Math.PI/20));
            var rY = -i*2*Math.PI/20;
            mesh.position.set(pX,0,pZ);
            mesh.rotation.y = rY;
            scene.add(mesh);
        }

    }

    var angles = 0;
    function animate() {
        // camera.position.y -= 0.2;
        // camera.rotation.y -= Math.PI/1000;
        // camera.position.z -= 10;
        angles += Math.PI/3600;
        camera.position.z = 1000 * Math.cos(angles);
        camera.position.x = 1000 * Math.sin(angles);
        camera.rotation.y = angles;
        requestAnimationFrame( animate );
        render();
    }

    var isMove = false, startX, startY, endX, endY;
    document.addEventListener( 'mousedown', onKeyDown, false );
	document.addEventListener( 'mouseup', onKeyUp, false );
	document.addEventListener( 'mousemove', onMove, false );

	function onKeyDown(ev){
		isMove = true;
		startX = ev.clientX;
		startY = ev.clientY;
	}

	function onKeyUp(ev){
		isMove = false;
	}
	function onMove(ev){
		if(isMove){
			endX = ev.clientX;
			endY = ev.clientY;
			
		}
	}

    function render(){
        renderer.render(scene, camera);
    }
</script>
</body>
</html>


